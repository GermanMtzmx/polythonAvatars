<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">


<!-- local imports -->
<link rel="import" href="../app-login/app-login.html">
<link rel="import" href="../app-notfound/app-notfound.html">
<link rel="import" href="../app-home/app-home.html">


<dom-module id="app-shell">
    <template>
        <style></style>
        
        <app-location route="{{route}}"></app-location>

        <app-route 
            route="{{route}}"
            pattern="/:page"
            data="{{routeData}}"
            tail="{{subroute}}"
        ></app-route>


        <iron-pages 
            role="main"
            attr-for-selected="id"
            selected="[[page]]"
            fallback-selection="notfound"
        >
            <app-login id="login"></app-login>
            <app-home id="home"></app-home>
            <app-notfound id="notfound"></app-notfound>
            
        </iron-pages>
    </template>


    <script>
        (function Shell(customElements){
            'use strict';

            class AppShell extends Polymer.Element {
                static get is(){ return 'app-shell'; }

                static get properties(){
                    return {
                        route:{
                            type:Object,
                            value:{}  
                        },

                        subroute:{
                            type:Object,
                            value:{}
                        },

                        routeData:{
                            type:Object,
                            value:{}
                        },

                        page:{
                            type:String
                        }                        
                    }                    
                }

                static get observers(){
                    return [
                        '_routePageChanged(routeData.page)'
                    ]
                }

                _routePageChanged(page){
                    this.page = page || 'login';
                    console.log(this.page)
                }
            }

            customElements.define(AppShell.is, AppShell);
        })(window.customElements);
    </script>
</dom-module>
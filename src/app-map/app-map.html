<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/google-map/google-map.html">
<link rel="import" href="../../bower_components/geo-location/geo-location.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="app-map">
    <template>
        <style>
            google-map {
                height: calc(100vh - 64px);
            }
        </style>


        <geo-location latitude="{{latitude}}" longitude="{{longitude}}"></geo-location>            
            <google-map fit-to-markers  zoom="17" api-key="AIzaSyA_0vRrqYQcHm7_WiM3qbgb-qeSf7lgp5Q">
            <google-map-marker slot="markers" latitude="{{latitude}}" longitude="{{longitude}}" title="You stay here"></google-map-marker>
            </google-map>

        </template>


    <script>
        (function map(customElements){
            'use strict';

            class AppMap extends Polymer.Element {
                static get is(){ return 'app-map'; }
                
                static properties(){
                    return {
                        latitude:{
                            type:String
                        },

                        longitude:{
                            type:String
                        },

                        params:{
                            type:Object,
                            value:{
                                type:'cashier',
                                keyword:'bancomer',
                                key:"AIzaSyC_C1mp_wqnAVyDXMY2lqKHI3OknzZbFyM"
                            }
                        },

                        places:{
                            type:Object
                        }
                    };
                }

                static get observers(){
                    return [
                        '_positionChanged(latitude,logitude)',
                        '_placesChanged(places)'
                    ]
                }

                _positionChanged(latitude, longitude){
                    this.set('params.location',`${latitude},${'longitude'}`);

                }

                _placesChanged(places){
                    console.log("places are", places);
                }

            }

            customElements.define(AppMap.is, AppMap);
        })(window.customElements);
    </script>
</dom-module>